# luna_pinyin.custom.yaml
#
# è£œéªåŠŸèƒ½ï¼šå°‡æœ™æœˆæ‹¼éŸ³çš„è©åº«ä¿®æ”¹çˆ²æœ™æœˆæ‹¼éŸ³æ“´å……è©åº«
#
# ä½œè€…ï¼šç‘¾æ˜€ <cokunhui@gmail.com>
#
# éƒ¨ç½²ä½ç½®ï¼š
# ~/.config/ibus/rime  (Linux)
# ~/Library/Rime  (Mac OS)
# %APPDATA%\Rime  (Windows)
#
# æ–¼é‡æ–°éƒ¨ç½²å¾Œç”Ÿæ•ˆ
#
#
# æ³¨æ„ï¼šæœ¬è£œéªé©ç”¨æ–¼æ‰€æœ‰æœ™æœˆæ‹¼éŸ³ç³»åˆ—æ–¹æ¡ˆï¼ˆã€Œæœ™æœˆæ‹¼éŸ³ã€ã€ã€Œæœ™æœˆæ‹¼éŸ³Â·ç®€åŒ–å­—ã€ã€ã€Œæœ™æœˆæ‹¼éŸ³Â·è‡ºç£æ­£é«”ã€ã€ã€Œæœ™æœˆæ‹¼éŸ³Â·èªå¥æµã€ï¼‰ã€‚
# åªé ˆå°‡æœ¬ custom.yaml çš„å‰é¢åå­—æ”¹çˆ²å°æ‡‰çš„è¼¸å…¥æ–¹æ¡ˆåå­—ç„¶å¾Œæ”¾å…¥ç”¨æˆ¶æ–‡ä»¶å¤¾é‡æ–°éƒ¨ç½²å³å¯ã€‚å¦‚ luna_pinyin_simp.custom.yamlã€‚
# é›™æ‹¼ç”¨æˆ¶è«‹ä½¿ç”¨ double_pinyin.custom.yamlã€‚
#
#
# é™„æœ™æœˆæ‹¼éŸ³ç³»åˆ—æ–¹æ¡ˆèˆ‡å…¶å°æ‡‰çš„ id ä¸€è¦½è¡¨ï¼š
# è¼¸å…¥æ–¹æ¡ˆ	id
# æœ™æœˆæ‹¼éŸ³	luna_pinyin
# æœ™æœˆæ‹¼éŸ³Â·ç®€åŒ–å­—	luna_pinyin_simp
# æœ™æœˆæ‹¼éŸ³Â·è‡ºç£æ­£é«”	luna_pinyin_tw
# æœ™æœˆæ‹¼éŸ³Â·èªå¥æµ	luna_pinyin_fluency
#

patch:
  switches:
    - name: ascii_mode
      reset: 0
      states: ["ä¸­æ–‡", "è¥¿æ–‡"]
    - name: full_shape
      states: ["åŠè§’", "å…¨è§’"]
    - name: zh_simp                      # (â€»1) ç¹ç®€è½¬æ¢
      reset: 1
      states: ["æ¼¢å­—", "æ±‰å­—"]
    - options: ["utf8", "gbk", "gb2312"] # (â€»2)å­—ç¬¦é›†é€‰å•
      reset: 0                           #     é»˜è®¤ UTF8
      states:
        - UTF-8
        - GBK
        - GB2312
    - name: show_emoji
      reset: 1
      states: [ "ğŸˆšï¸ï¸\uFE0E", "ğŸˆ¶ï¸ï¸\uFE0F" ]

  simplifier:
    option_name: zh_simp

  engine/filters:
      - simplifier
      - simplifier@emoji_conversion
      - uniquifier
      - charset_filter@gbk              # (â€»3) GBK è¿‡æ»¤
      - single_char_filter

  emoji_conversion:
    opencc_config: emoji.json
    option_name: show_emoji
    tags: abc

  # åŠ è¼‰ easy_en ä¾è³´ï¼Œè‹±æ–‡è¯æƒ³è¼¸å…¥
  "schema/dependencies/@next": easy_en

  # è¼‰å…¥ç¿»è­¯è‹±æ–‡çš„ç¢¼è¡¨ç¿»è­¯å™¨ï¼Œå–åçˆ² english
  "engine/translators/@next": table_translator@english

  # english ç¿»è­¯å™¨çš„è¨­å®šé …
  english:
    dictionary: easy_en
    spelling_hints: 9
    enable_completion: true
    enable_sentence: false
    initial_quality: -1

  # è¼‰å…¥æœ™æœˆæ‹¼éŸ³æ“´å……è©åº«
  "translator/dictionary": luna_pinyin.extended
  # æ‹¼å†™çº é”™ï¼Œä¸å»ºæ„å¼€å¯
  #"translator/enable_correction": true

  # æ”¹å¯«æ‹¼å¯«é‹ç®—ï¼Œä½¿å¾—å«è¥¿æ–‡çš„è©å½™ï¼ˆä½æ–¼ luna_pinyin.cn_en.dict.yaml ä¸­ï¼‰ä¸å½±éŸ¿ç°¡æ‹¼åŠŸèƒ½ï¼ˆæ³¨æ„ï¼Œæ­¤åŠŸèƒ½åªé©ç”¨æ–¼æœ™æœˆæ‹¼éŸ³ç³»åˆ—æ–¹æ¡ˆï¼Œä¸é©ç”¨æ–¼å„é¡é›™æ‹¼æ–¹æ¡ˆï¼‰
  # æœ¬æ¢è£œéªåªåœ¨ã€Œå°ç‹¼æ¯« 0.9.30ã€ã€ã€Œé¼ é¬šç®¡ 0.9.25 ã€ã€ã€ŒRime-1.2ã€åŠæ›´é«˜çš„ç‰ˆæœ¬ä¸­èµ·ä½œç”¨ã€‚
  "speller/algebra/@before 0": xform/^([b-df-np-z])$/$1_/
  #"switches/@0/reset": 1  #è¡¨ç¤ºå°‡ switcher åˆ—è¡¨ä¸­çš„ç¬¬ä¸€å€‹å…ƒç´ ï¼ˆå³ ascii_mode é–‹é—œï¼‰çš„åˆå§‹å€¼é‡è¨­çˆ²ç‹€æ…‹1ï¼ˆå³ã€Œè‹±æ–‡ã€ï¼‰ã€‚

  # ç¬¦å·å¿«é€Ÿè¾“å…¥å’Œéƒ¨åˆ†ç¬¦å·çš„å¿«é€Ÿä¸Šå±
  punctuator:
    import_preset: symbols
    symbols:
      "/fs": [Â½, â€°, Â¼, â…“, â…”, Â¾, â…’ ]
      "/bq": [ğŸ˜‚ï¸, ğŸ˜…ï¸, â˜ºï¸, ğŸ˜±ï¸, ğŸ˜­ï¸, ğŸ˜‡ï¸, ğŸ™ƒï¸, ğŸ¤”ï¸, ğŸ’Šï¸, ğŸ’¯ï¸, ğŸ‘ï¸, ğŸ™ˆï¸, ğŸ’©ï¸, ğŸ˜ˆï¸ ]
      "/dn": [âŒ˜, âŒ¥, â‡§, âŒƒ, â‹, â‡ª, ï£¿, âŒ«, âŒ¦, â†©ï¸, â, â†‘, â†“, â†, â†’, â†–, â†˜, â‡Ÿ, â‡]
      "/fh": [ Â©, Â®, â„—, â“˜, â„ , â„¢, â„¡, â¡, â™‚, â™€, â˜‰, â˜Š, â˜‹, â˜Œ, â˜, â˜, â˜‘ï¸, â˜’, â˜œ, â˜, â˜, â˜Ÿ, âœ, âœ„, â™», âš, âš‘, âš ]
      "/xh": [ ï¼Š, Ã—, âœ±, â˜…, â˜†, âœ©, âœ§, â‹, âŠ, â‰, âˆ, â…, âœ¿, âœ²]
    half_shape:
      "#": "#"
      "*": "*"
      "`": "`"
      "~": "~"
      "@": "@"
      "=": "="
      "_" : "â”€â”€"
      "[": ["ã€", "["]
      "]": ["ã€‘", "]"]
      "$": ["Â¥", "$", "â‚¬", "Â£", "Â¢", "Â¤"]
      "!": "ï¼"
      "%": "%"
      "^": "â€¦â€¦"
      "&": "&"
      "(": "ï¼ˆ"
      ")": "ï¼‰"
      ';': 'ï¼›'
      ':': 'ï¼š'
      '?': 'ï¼Ÿ'
      "'": {pair: ["â€˜", "â€™"]}
      '"': {pair: ["â€œ", "â€"]}
      "<": ["ã€Š", "ã€ˆ", "Â«", "<"]
      ">": ["ã€‹", "ã€‰", "Â»", ">"]
      '|': '|'
      '\': "ã€"
      "/": ["ï¼", "/", "Ã·", "Ã—"]

  recognizer:
    patterns:
      email: "^[A-Za-z][-_.0-9A-Za-z]*@.*$"
      uppercase: "[A-Z][-_+.'0-9A-Za-z]*$"
      url: "^(www[.]|https?:|ftp[.:]|mailto:|file:).*$|^[a-z]+[.].+$"
      punct: "^/([a-z]+|[0-9]0?)$"

  # english ç¿»è­¯å™¨çš„è¨­å®šé …
  english:
    dictionary: easy_en
    spelling_hints: 9
    enable_completion: false     # æ˜¯å¦å¯ç”¨è‹±æ–‡è¾“å…¥è”æƒ³è¡¥å…¨
    enable_sentence: false
    initial_quality: -4           # è°ƒæ•´è‹±æ–‡å€™é€‰è¯çš„ä½ç½®ï¼Œå¦‚ -3 ä¼šæ›´é å

  # librime-lua è¾“å…¥åŠ¨æ€æ—¶é—´å’Œæ—¥æœŸ
  "engine/translators/@6": lua_translator@date_translator
  "engine/translators/@7": lua_translator@time_translator

  # æ¨¡ç³Šæ‹¼éŸ³
  'speller/algebra':
    - erase/^xx$/                      # ç¬¬ä¸€è¡Œä¿ç•™
    # æ¨¡ç³ŠéŸ³å®šç¾©
    # éœ€è¦å“ªçµ„å°±åˆªå»è¡Œé¦–çš„ # è™Ÿï¼Œå–®é›™å‘ä»»é¸
    #- derive/^([zcs])h/$1/             # zh, ch, sh => z, c, s
    #- derive/^([zcs])([^h])/$1h$2/     # z, c, s => zh, ch, sh

    #- derive/^n/l/                     # n => l
    #- derive/^l/n/                     # l => n

    # é€™å…©çµ„ä¸€èˆ¬æ˜¯å–®å‘çš„
    #- derive/^r/l/                     # r => l

    #- derive/^ren/yin/                 # ren => yin, reng => ying
    #- derive/^shen/sehn/
    #- derive/^r/y/                     # r => y

    # ä¸‹é¢ hu <=> f é€™çµ„å¯«æ³•è¤‡é›œä¸€äº›ï¼Œåˆ†æƒ…æ³è¨è«–
    #- derive/^hu$/fu/                  # hu => fu
    #- derive/^hong$/feng/              # hong => feng
    #- derive/^hu([in])$/fe$1/          # hui => fei, hun => fen
    #- derive/^hu([ao])/f$1/            # hua => fa, ...

    #- derive/^fu$/hu/                  # fu => hu
    #- derive/^feng$/hong/              # feng => hong
    #- derive/^fe([in])$/hu$1/          # fei => hui, fen => hun
    #- derive/^f([ao])/hu$1/            # fa => hua, ...

    # éŸ»æ¯éƒ¨ä»½
    #- derive/^([bpmf])eng$/$1ong/      # meng = mong, ...
    #- derive/([ei])n$/$1ng/            # en => eng, in => ing
    #- derive/([ei])ng$/$1n/            # eng => en, ing => in
 
    #è‡ªåˆ¶
    #- derive/^([sj])hen$/$1ehn/

    # æ¨£ä¾‹è¶³å¤ äº†ï¼Œå…¶ä»–è«‹è‡ªå·±ç¸½çµâ€¦â€¦

    # åæ¨¡ç³ŠéŸ³ï¼Ÿ
    # èª°èªªæ–¹è¨€æ²’æœ‰æ™®é€šè©±ç²¾ç¢ºã€æœ‰æ¨¡ç³ŠéŸ³ï¼Œå°±èƒ½æœ‰åæ¨¡ç³ŠéŸ³ã€‚
    # ç¤ºä¾‹çˆ²åˆ†å°–åœ˜çš„ä¸­åŸå®˜è©±ï¼š
    #- derive/^ji$/zii/   # åœ¨è¨­è¨ˆè€…å®‰æ’ä¸‹é³©ä½”éµ²å·¢ï¼Œå°–éŸ³iåªå¥½é›™å¯«äº†
    #- derive/^qi$/cii/
    #- derive/^xi$/sii/
    #- derive/^ji/zi/
    #- derive/^qi/ci/
    #- derive/^xi/si/
    #- derive/^ju/zv/
    #- derive/^qu/cv/
    #- derive/^xu/sv/
    # éŸ»æ¯éƒ¨ä»½ï¼Œåªèƒ½å¾å¤§é¢ä¸Šè¦†è“‹
    #- derive/^([bpm])o$/$1eh/          # bo => beh, ...
    #- derive/(^|[dtnlgkhzcs]h?)e$/$1eh/  # ge => geh, se => sheh, ...
    #- derive/^([gkh])uo$/$1ue/         # guo => gue, ...
    #- derive/^([gkh])e$/$1uo/          # he => huo, ...
    #- derive/([uv])e$/$1o/             # jue => juo, lve => lvo, ...
    #- derive/^fei$/fi/                 # fei => fi
    #- derive/^wei$/vi/                 # wei => vi
    #- derive/^([nl])ei$/$1ui/          # nei => nui, lei => lui
    #- derive/^([nlzcs])un$/$1vn/       # lun => lvn, zun => zvn, ... 
    #- derive/^([nlzcs])ong$/$1iong/    # long => liong, song => siong, ...
    # é€™å€‹è¾¦æ³•é›–å¾æ‹¼å¯«ä¸Šåšå‡ºäº†å€åˆ†ï¼Œç„¶è€Œå—è©å…¸åˆ¶ç´„ï¼Œå€™é¸å­—ä»æ˜¯æ··çš„ã€‚
    # åªæœ‰çœŸæ­£çš„æ–¹éŸ³è¼¸å…¥æ–¹æ¡ˆçº”èƒ½åšåˆ°ï¼ä½†ã€Œåæ¨¡ç³ŠéŸ³ã€é€™å€‹ç©æ³•å¿«é€Ÿè€Œæœ‰æ•ˆï¼

    # æ¨¡ç³ŠéŸ³å®šç¾©å…ˆæ–¼ç°¡æ‹¼å®šç¾©ï¼Œæ–¹å¯ä»¤ç°¡æ‹¼æ”¯æŒä»¥ä¸Šæ¨¡ç³ŠéŸ³
    - abbrev/^([a-z]).+$/$1/           # ç°¡æ‹¼ï¼ˆé¦–å­—æ¯ï¼‰
    - abbrev/^([zcs]h).+$/$1/          # ç°¡æ‹¼ï¼ˆzh, ch, shï¼‰

    # ä»¥ä¸‹æ˜¯ä¸€çµ„å®¹éŒ¯æ‹¼å¯«ï¼Œã€Šæ¼¢èªæ‹¼éŸ³ã€‹æ–¹æ¡ˆä»¥å‰è€…çˆ²æ­£
    - derive/^([nl])ve$/$1ue/          # nve = nue, lve = lue
    - derive/^([jqxy])u/$1v/           # ju = jv,
    - derive/un$/uen/                  # gun = guen,
    - derive/ui$/uei/                  # gui = guei,
    - derive/iu$/iou/                  # jiu = jiou,

    # è‡ªå‹•ç³¾æ­£ä¸€äº›å¸¸è¦‹çš„æŒ‰éµéŒ¯èª¤
    - derive/([aeiou])ng$/$1gn/        # dagn => dang
    - derive/([dtngkhrzcs])o(u|ng)$/$1o/  # zho => zhong|zhou
    - derive/ong$/on/                  # zhonguo => zhong guo
    - derive/ao$/oa/                   # hoa => hao
    - derive/([iu])a(o|ng?)$/a$1$2/    # tain => tian

    # åˆ†å°–åœ˜å¾Œ v => Ã¼ çš„æ”¹å¯«æ¢ä»¶ä¹Ÿè¦ç›¸æ‡‰åœ°æ“´å……ï¼š
    #'translator/preedit_format':
    #  - "xform/([nljqxyzcs])v/$1Ã¼/"